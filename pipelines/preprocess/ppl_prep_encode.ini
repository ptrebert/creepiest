[Run]
load_path= /home/pebert/work/code/mpggit/creepiest/pipelines
load_name= preprocess.ppl_prep_encode

[Pipeline]
name= PREPENCODE
refdir= /TL/deep/fhgfs/projects/pebert/thesis/refdata/chromsizes
datadir= /TL/deep/fhgfs/projects/pebert/thesis/biodata/dlfolder/encode
tempdir= /TL/deep/fhgfs/projects/pebert/thesis/biodata/pipelined/conversion/encode
outdir= /TL/deep/fhgfs/projects/pebert/thesis/biodata/pipelined/conversion/encode/hdf5
encmd= /home/pebert/work/code/mpggit/creepiest/datasrc/encode/20160211_ENCODE_metadata.tsv
encds= /home/pebert/work/code/mpggit/creepiest/datasrc/encode/20160225_ENCDS_ids.json

convbw= bigWigToBedGraph {inputfile} stdout | egrep "^chr[0-9]+\s" | gzip -c > {outputfile}
convbg= creepiest.py -dmp ${EnvPaths:confdump} --verbose -wrk 4 convert --task signal -i {{inputfiles}} -o {{outputfile}} -cs {{referencefile}} -og {ASSEMBLY[0]}/signal/cov/src
convbb= bigBedToBed {inputfile} stdout | egrep "^chr[0-9]+\s" | gzip -c > {outputfile}
convbed= creepiest.py -dmp ${EnvPaths:confdump} -wrk 1 convert --task region -i {{inputfiles}} -o {{outputfile}} --score-idx 6 -og {ASSEMBLY[0]}/peak/src/fg
runall= touch {outputfile}


[Ruffus]
use_threads= True
jobs= 30
verbose= 4
history_file= ${EnvPaths:ruffushist}/${Pipeline:name}_hist.sqlite
log_file= ${EnvPaths:ruffuslog}/${Pipeline:name}_ruffus.log

[JobConfig]
workdir= ${EnvPaths:workdir}
outpath= ${EnvPaths:ruffusdump}
errpath= ${EnvPaths:ruffusdump}
native_spec= -l mem_free=5G,slots_free=1,tmp_free=5G,h=deep1[0123456789]*|deep2[0123456789]*
scriptdir= ${EnvPaths:ruffusdump}
keepscripts= 0

[MemJobConfig]
workdir= ${EnvPaths:workdir}
outpath= ${EnvPaths:ruffusdump}
errpath= ${EnvPaths:ruffusdump}
native_spec= -l mem_free=30G,slots_free=4,tmp_free=5G,h=deep1[0123456789]*|deep2[0123456789]*
scriptdir= ${EnvPaths:ruffusdump}
keepscripts= 0
